[phases.setup]
nixPkgs = ["bun", "python3", "gcc", "gnumake", "pkg-config", "stdenv.cc.cc.lib"]

[phases.install]
cmds = [
  "bun install || (echo '⚠️ Install failed, retrying with --ignore-scripts (native modules will be skipped)...' && bun install --ignore-scripts)"
]

[phases.build]
cmds = []

[start]
cmd = "bun run src/index.ts & bun run src/worker.ts"
